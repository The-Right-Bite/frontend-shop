import{a as V,j as e}from"./index-Ck4DZWE2.js";import{t as b}from"./getProductImage-BSOe7zKI.js";import{c as q,r,L as G}from"./router-txoNkVqA.js";import{B as M}from"./Breadcrumbs-CVKegcDk.js";import{R as C}from"./RelatedProducts-B-YBcvQO.js";import"./vendor-DoC2WAmd.js";import"./CatalogCard-DiKBhkQM.js";const F="_container_u0enh_1",W="_content_u0enh_13",Y="_productImage_u0enh_21",z="_image_u0enh_39",H="_shortInfoContainer_u0enh_55",J="_detailsBlock_u0enh_71",K="_briefPanel_u0enh_89",O="_productName_u0enh_109",Q="_productNumber_u0enh_119",X="_actualPrice_u0enh_127",Z="_prices_u0enh_137",ee="_actionButtons_u0enh_189",te="_productAmount_u0enh_203",se="_changeProductAmountIcon_u0enh_227",ne="_addToCartButton_u0enh_247",ae="_detailedInfo_u0enh_297",ie="_infoTextBlock_u0enh_327",ce="_textDescription_u0enh_339",oe="_nutritionRow_u0enh_357",re="_nutritionClauseIcon_u0enh_371",le="_textUnderlined_u0enh_467",de="_relatedProducts_u0enh_477",s={container:F,content:W,productImage:Y,image:z,shortInfoContainer:H,detailsBlock:J,briefPanel:K,productName:O,productNumber:Q,actualPrice:X,prices:Z,actionButtons:ee,productAmount:te,changeProductAmountIcon:se,addToCartButton:ne,detailedInfo:ae,infoTextBlock:ie,textDescription:ce,nutritionRow:oe,nutritionClauseIcon:re,textUnderlined:le,relatedProducts:de};function fe(){var f,v,P;const{id:l}=q(),d="https://right-bite-store.onrender.com",{addItem:y}=V(),[t,_]=r.useState(null),[u,j]=r.useState(!1),[m,h]=r.useState(""),[ue,k]=r.useState([]);r.useEffect(()=>{if(!l)return;const n=new AbortController;return(async()=>{j(!0),h("");try{const a=await fetch(`${d}/api/v1/catalog/${l}`,{method:"GET",headers:{accept:"application/json"},signal:n.signal}),S=a.headers.get("content-type")||"";let i=null;try{if(S.includes("application/json"))i=await a.json();else{const c=await a.text();i=c?{message:c}:null}}catch{i=null}if(!a.ok){const c=i&&(i.message||i.error)||`Request failed with status ${a.status}`;h(c),_(null);return}_(i);const I=await fetch(`${d}/api/v1/catalog/${l}/related`,{signal:n.signal});if(I.ok){const c=await I.json();k(c)}}catch(a){(a==null?void 0:a.name)!=="AbortError"&&h("Network error. Please try again later.")}finally{j(!1)}})(),()=>n.abort()},[d,l]);const[p,N]=r.useState(1),B=()=>{N(n=>n===1?1:n-1)},w=()=>{N(n=>n+1)},x=(t==null?void 0:t.productName)||"Product",A=(t==null?void 0:t.id)??"",g=(t==null?void 0:t.price)!=null?t.price:null,R=(t==null?void 0:t.description)||"",$=((f=t==null?void 0:t.brand)==null?void 0:f.brandName)||"",T=Array.isArray(t==null?void 0:t.categories)&&((v=t.categories[0])!=null&&v.categoryName)?t.categories[0].categoryName:"";t==null||t.weight;const D=(t==null?void 0:t.protein)??null,U=(t==null?void 0:t.fat)??null,E=(t==null?void 0:t.carbs)??null;let o=Array.isArray(t==null?void 0:t.images)&&((P=t.images[0])!=null&&P.url)?t.images[0].url:"";o&&o.startsWith("/")&&(o=`${d.replace(/\/+$/,"")}${o}`);const L=()=>{if(!t)return;const n={id:t.id,name:t.productName,price:t.price,quantity:p,image:o||b,weight:t.weight??null,description:t.description};y(n)};return e.jsx("div",{className:s.container,children:e.jsxs("div",{className:s.content,children:[e.jsx(M,{items:[{title:"Catalog",path:"/catalog"},{title:"Item"}],hideCurrent:!0}),u&&e.jsx("div",{style:{padding:"2rem"},children:"Loading..."}),!u&&m&&e.jsx("div",{style:{padding:"2rem",color:"#c62828"},children:m}),e.jsx("div",{className:s.content}),!u&&!m&&e.jsxs("div",{className:s.shortInfoContainer,children:[e.jsx("div",{className:s.productImage,children:e.jsx("img",{src:o||b,alt:x,className:s.image})}),e.jsxs("div",{className:s.detailsBlock,children:[e.jsxs("div",{className:s.briefPanel,children:[e.jsx("h3",{className:s.productName,children:x}),e.jsx("div",{className:s.productNumber,children:A}),g!=null&&e.jsx("span",{className:s.actualPrice,children:`â‚¬ ${g}`}),e.jsx("div",{className:s.prices,children:e.jsxs("div",{className:s.actionButtons,children:[e.jsxs("div",{className:s.productAmount,children:[e.jsx("div",{className:s.changeProductAmountIcon,onClick:B,children:"-"}),e.jsx("div",{children:p}),e.jsx("div",{className:s.changeProductAmountIcon,onClick:w,children:"+"})]}),e.jsx(G,{to:"/cart",children:e.jsx("button",{className:s.addToCartButton,onClick:L,children:e.jsx("div",{className:"material-symbols-outlined",children:"shopping_bag"})})})]})})]}),e.jsxs("div",{className:s.detailedInfo,children:[e.jsxs("div",{className:s.infoBlock,children:[e.jsx("h3",{children:"Description"}),e.jsx("p",{children:R})]}),e.jsxs("div",{className:s.infoBlock,children:[e.jsx("h3",{children:"General Information"}),e.jsxs("div",{className:s.infoTextBlock,children:[e.jsxs("div",{children:[e.jsx("span",{className:s.textDescription,children:"Product name: "}),e.jsx("span",{children:x})]}),e.jsxs("div",{children:[e.jsx("span",{className:s.textDescription,children:"Brand: "}),e.jsx("span",{className:s.textUnderlined,children:$})]}),e.jsxs("div",{children:[e.jsx("span",{className:s.textDescription,children:"Category: "}),e.jsx("span",{className:s.textUnderlined,children:T})]})]})]}),e.jsxs("div",{className:s.infoBlock,children:[e.jsx("h3",{children:"Nutrition Value"}),e.jsxs("div",{className:s.nutritionRow,children:[e.jsx("div",{className:s.nutritionClauseIcon,children:e.jsx("span",{className:"material-symbols-outlined",children:"check"})}),e.jsx("span",{children:`Protein : ${D??"-"} g`})]}),e.jsxs("div",{className:s.nutritionRow,children:[e.jsx("div",{className:s.nutritionClauseIcon,children:e.jsx("span",{className:"material-symbols-outlined",children:"check"})}),e.jsx("span",{children:`Fat : ${U??"-"} g`})]}),e.jsxs("div",{className:s.nutritionRow,children:[e.jsx("div",{className:s.nutritionClauseIcon,children:e.jsx("span",{className:"material-symbols-outlined",children:"check"})}),e.jsx("span",{children:`Carbohydrates : ${E??"-"} g`})]}),e.jsxs("div",{className:s.nutritionRow,children:[e.jsx("div",{className:s.nutritionClauseIcon,children:e.jsx("span",{className:"material-symbols-outlined",children:"check"})}),e.jsx("span",{children:"Vitamins (per 100g) : Vitamin C, Vitamin A"})]})]})]})]})]}),e.jsx("div",{className:s.relatedProducts,children:e.jsx(C,{title:"Similar products",limit:4})}),e.jsx("div",{className:s.relatedProducts,children:e.jsx(C,{title:"You might also like",limit:4})})]})})}export{fe as default};
