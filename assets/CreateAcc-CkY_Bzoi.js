import{u as I,j as s}from"./index-Xu99HZNl.js";import{r as a,u as O,L as E}from"./router-txoNkVqA.js";import{s as p}from"./hide-eye-icon-CFz3Vis7.js";import"./vendor-DoC2WAmd.js";const T="_container_dq2ft_1",D="_left_dq2ft_13",B="_right_dq2ft_27",A="_title_dq2ft_43",H="_titleContainer_dq2ft_53",L="_inntitle_dq2ft_67",F="_block_dq2ft_79",R="_form_dq2ft_95",J="_input_dq2ft_111",U="_email_dq2ft_127",V="_paragraphe_dq2ft_139",W="_link_dq2ft_159",$="_button_dq2ft_187",K="_buttonDisabled_dq2ft_221",M="_flex_dq2ft_237",z="_togglePasswordOffIcon_dq2ft_253",G="_togglePasswordIcon_dq2ft_261",Q="_togglePasswordButton_dq2ft_273",X="_frame_dq2ft_281",Y="_start_dq2ft_293",Z="_condition_dq2ft_305",t={container:T,left:D,right:B,title:A,titleContainer:H,inntitle:L,block:F,form:R,input:J,email:U,paragraphe:V,link:W,button:$,buttonDisabled:K,flex:M,togglePasswordOffIcon:z,togglePasswordIcon:G,togglePasswordButton:Q,frame:X,start:Y,condition:Z},_="/online-store-frontend/assets/open-eye-icon-mSwNMiNK.png";function os(){const{login:w}=I(),[r,x]=a.useState(""),[o,j]=a.useState(""),[i,N]=a.useState(""),[c,b]=a.useState(!1),[l,P]=a.useState(!1),[f,n]=a.useState(""),[g,u]=a.useState(!1),v=O(),y=()=>{b(!c)},q=()=>{P(!l)},S=async e=>{if(e.preventDefault(),n(""),o!==i){n("Passwords do not match");return}u(!0);try{const d=await fetch("https://right-bite-store.onrender.com/api/v1/auth/sing-up",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:o,confirmationPassword:i})});if(!d.ok){const k=await d.json();n(k.message||"Registration failed");return}const h=await fetch("https://right-bite-store.onrender.com/api/v1/auth/sing-in",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:o})}),m=await h.json();h.ok&&m.accessToken&&m.refreshToken?(w(m.accessToken,m.refreshToken),v("/successreg")):n("Account created, but login failed")}catch(d){console.error("Error occurred:",d),n("Server error")}finally{u(!1)}},C=r&&o&&i;return s.jsx(s.Fragment,{children:s.jsxs("div",{className:t.container,children:[s.jsx("div",{className:t.left}),s.jsx("div",{className:t.right,children:s.jsxs("div",{className:t.block,children:[s.jsxs("div",{className:t.frame,children:[s.jsxs("div",{className:t.titleContainer,children:[s.jsx("h1",{className:t.title,children:"Create an account"}),s.jsxs("p",{className:t.inntitle,children:["Already have an ccount?",s.jsxs(E,{to:"/login",className:t.link,children:[" ","Log in"]})," "]})]}),s.jsx("p",{className:t.start,children:"Start by entering your basic details"})]}),s.jsxs("form",{className:t.form,onSubmit:S,children:[s.jsxs("div",{className:t.email,children:[s.jsx("h4",{className:t.paragraphe,children:"Email address"}),s.jsx("input",{type:"email",className:t.input,value:r,onChange:e=>x(e.target.value),required:!0})]}),s.jsxs("div",{className:t.email,children:[s.jsxs("div",{className:t.flex,children:[s.jsx("h4",{className:t.paragraphe,children:"Password"}),s.jsxs("button",{type:"button",onClick:y,className:t.togglePasswordButton,children:[c?s.jsx("img",{src:_,alt:"Show password",className:t.togglePasswordIcon}):s.jsx("img",{src:p,alt:"Hide password",className:t.togglePasswordOffIcon}),c?"Show":"Hide"]})]}),s.jsx("div",{className:t.passwordInputWrapper,children:s.jsx("input",{type:c?"text":"password",className:t.input,value:o,onChange:e=>j(e.target.value),required:!0})}),s.jsx("p",{className:t.condition,children:"Use 8 or more characters with a mix of letters, numbers & symbols"})]}),s.jsxs("div",{className:t.email,children:[s.jsxs("div",{className:t.flex,children:[s.jsx("h4",{className:t.paragraphe,children:"Confirm Password"}),s.jsxs("button",{type:"button",onClick:q,className:t.togglePasswordButton,children:[l?s.jsx("img",{src:_,alt:"Show password",className:t.togglePasswordIcon}):s.jsx("img",{src:p,alt:"Hide password",className:t.togglePasswordOffIcon}),l?"Show":"Hide"]})]}),s.jsx("div",{className:t.passwordInputWrapper,children:s.jsx("input",{type:l?"text":"password",className:t.input,value:i,onChange:e=>N(e.target.value),required:!0})}),s.jsx("p",{className:t.condition,children:"Use 8 or more characters with a mix of letters, numbers & symbols"})]}),f&&s.jsx("p",{className:t.error,children:f}),s.jsx("button",{type:"submit",className:`${t.button} ${C?"":t.buttonDisabled}`,disabled:g,children:g?"Creating...":"Create account"})]})]})})]})})}export{os as default};
